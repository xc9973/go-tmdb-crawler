<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Content Security Policy -->
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self';
        script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net;
        style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net;
        img-src 'self' data: https:;
        font-src 'self' https://cdn.jsdelivr.net;
        connect-src 'self';
        frame-ancestors 'none';
    ">
    <title>登录 - TMDB剧集管理系统</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="css/custom.css" rel="stylesheet">
    <link href="css/login.css" rel="stylesheet">
</head>
<body class="login-page">
    <div class="login-container">
        <!-- Logo and Title -->
        <div class="login-header text-center mb-4">
            <div class="logo-icon mb-3">
                <i class="bi bi-tv"></i>
            </div>
            <h1 class="login-title">TMDB剧集管理系统</h1>
            <p class="login-subtitle">请输入管理员API密钥以继续</p>
        </div>

        <!-- Login Card -->
        <div class="card login-card">
            <div class="card-body p-4">
                <!-- Error Message -->
                <div id="errorAlert" class="alert alert-danger d-none" role="alert">
                    <i class="bi bi-exclamation-triangle-fill me-2"></i>
                    <span id="errorText"></span>
                </div>

                <!-- Success Message -->
                <div id="successAlert" class="alert alert-success d-none" role="alert">
                    <i class="bi bi-check-circle-fill me-2"></i>
                    <span id="successText"></span>
                </div>

                <!-- Login Form -->
                <form id="loginForm">
                    <!-- API Key Input -->
                    <div class="mb-4">
                        <label for="apiKeyInput" class="form-label">
                            <i class="bi bi-key-fill me-1"></i>
                            管理员API密钥
                        </label>
                        <div class="input-group input-group-lg">
                            <span class="input-group-text">
                                <i class="bi bi-shield-lock"></i>
                            </span>
                            <input 
                                type="password" 
                                class="form-control" 
                                id="apiKeyInput" 
                                placeholder="请输入管理员API密钥"
                                required
                                autocomplete="current-password"
                            >
                            <button 
                                class="btn btn-outline-secondary" 
                                type="button" 
                                id="togglePasswordBtn"
                                title="显示/隐藏密钥"
                            >
                                <i class="bi bi-eye" id="togglePasswordIcon"></i>
                            </button>
                        </div>
                        <div class="form-text">
                            <i class="bi bi-info-circle me-1"></i>
                            联系管理员获取API密钥
                        </div>
                    </div>

                    <!-- Remember Me -->
                    <div class="mb-4">
                        <div class="form-check">
                            <input 
                                class="form-check-input" 
                                type="checkbox" 
                                id="rememberMeCheck"
                                checked
                            >
                            <label class="form-check-label" for="rememberMeCheck">
                                <i class="bi bi-bookmark-check me-1"></i>
                                记住登录状态 (30天)
                            </label>
                        </div>
                        <div class="form-text text-muted">
                            <small>
                                <i class="bi bi-shield-check me-1"></i>
                                勾选后,登录状态将在30天内有效
                            </small>
                        </div>
                    </div>

                    <!-- Login Button -->
                    <div class="d-grid gap-2">
                        <button 
                            type="submit" 
                            class="btn btn-primary btn-lg" 
                            id="loginBtn"
                        >
                            <i class="bi bi-box-arrow-in-right me-2"></i>
                            <span id="loginBtnText">登录</span>
                        </button>
                    </div>
                </form>

                <!-- Security Notice -->
                <div class="mt-4 pt-3 border-top">
                    <div class="alert alert-info mb-0">
                        <i class="bi bi-shield-fill-check me-2"></i>
                        <strong>安全提示:</strong>
                        <ul class="mb-0 mt-2 small">
                            <li>登录状态使用安全的HttpOnly Cookie存储</li>
                            <li>关闭浏览器后,如未勾选"记住我",将自动退出</li>
                            <li>建议定期更换API密钥以确保安全</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="login-footer text-center mt-4">
            <small class="text-muted">
                <i class="bi bi-c-circle me-1"></i>
                2024 TMDB剧集管理系统 | 
                <i class="bi bi-shield-lock me-1"></i>
                安全登录
            </small>
        </div>
    </div>

    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- API Client -->
    <script src="js/api.js"></script>
    <!-- Login Logic -->
    <script src="js/login.js"></script>
</body>
</html>
